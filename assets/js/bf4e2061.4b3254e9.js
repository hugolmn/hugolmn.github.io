"use strict";(self.webpackChunkdocusaurus_test=self.webpackChunkdocusaurus_test||[]).push([[7051],{3013:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>o});var a=n(5893),t=n(1151);const i={},r="TGV economic performance optimization",l={type:"mdx",permalink:"/projects/tgv-economic-performance-optimization/",source:"@site/src/pages/projects/tgv-economic-performance-optimization/index.md",title:"TGV economic performance optimization",description:"Dynamic Programming",frontMatter:{},unlisted:!1},c={},o=[{value:"Dynamic Programming",id:"dynamic-programming",level:2},{value:"Optimization of the train operation",id:"optimization-of-the-train-operation",level:2},{value:"Initialization of the problem",id:"initialization-of-the-problem",level:2},{value:"Main loop",id:"main-loop",level:2},{value:"Solutions",id:"solutions",level:2},{value:"Results",id:"results",level:2}];function m(e){const s={annotation:"annotation",em:"em",h1:"h1",h2:"h2",img:"img",li:"li",math:"math",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",msup:"msup",p:"p",semantics:"semantics",span:"span",ul:"ul",...(0,t.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.h1,{id:"tgv-economic-performance-optimization",children:"TGV economic performance optimization"}),"\n",(0,a.jsx)(s.h2,{id:"dynamic-programming",children:"Dynamic Programming"}),"\n",(0,a.jsx)(s.p,{children:"Dynamic programming is an optimization method based on breaking down a big problem into smaller problems that are easier to solve."}),"\n",(0,a.jsx)(s.p,{children:"In this project, the main benefits of using dynamic programming are the following:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"We don't know a priori what the shape of the solution would be, but we can formalize the problem, its constraints, and the metrics to be optimized."}),"\n",(0,a.jsx)(s.li,{children:"We can explore possible ways to operate the train, and keep track of the previous states of the search: we don't have to start from the beginning each time we run into a dead-end."}),"\n",(0,a.jsx)(s.li,{children:"We can generate more than one solution, and therefore explore trade-offs between energy savings and delay."}),"\n"]}),"\n",(0,a.jsx)(s.p,{children:"Therefore, we can think of dynamic programming as smart brute-force method. At each iteration we explore a most-promising node, and cut out the ones that are already breaking a constraint."}),"\n",(0,a.jsx)(s.p,{children:"For instance, if we were to truly brute-force a 100-step problem with 5 possibilities for each node, we would have to generate an unthinkable number of paths:"}),"\n",(0,a.jsx)("div",{class:"text-center mb-0",children:(0,a.jsx)(s.span,{className:"katex-display",children:(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsxs)(s.msup,{children:[(0,a.jsx)(s.mn,{children:"5"}),(0,a.jsx)(s.mn,{children:"100"})]}),(0,a.jsx)(s.mo,{children:"="}),(0,a.jsx)(s.mn,{children:"7.88"}),(0,a.jsx)(s.mo,{children:"\u2217"}),(0,a.jsx)(s.mn,{children:"1"}),(0,a.jsxs)(s.msup,{children:[(0,a.jsx)(s.mn,{children:"0"}),(0,a.jsx)(s.mn,{children:"69"})]})]}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"5^{100} = 7.88*10^{69}"})]})})}),(0,a.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.8641em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord",children:"5"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsx)(s.span,{className:"vlist-t",children:(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.8641em"},children:(0,a.jsxs)(s.span,{style:{top:"-3.113em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:"100"})})})]})})})})})]}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mrel",children:"="}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(s.span,{className:"mord",children:"7.88"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(s.span,{className:"mbin",children:"\u2217"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.8641em"}}),(0,a.jsx)(s.span,{className:"mord",children:"1"}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord",children:"0"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsx)(s.span,{className:"vlist-t",children:(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.8641em"},children:(0,a.jsxs)(s.span,{style:{top:"-3.113em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:"69"})})})]})})})})})]})]})]})]})})}),"\n",(0,a.jsx)(s.p,{children:"However, if the constraints we have set are actually restricting possibilities to an average of 1.1 possibilities for each node, we restrict the research space to:"}),"\n",(0,a.jsx)("div",{class:"text-center mb-0",children:(0,a.jsx)(s.span,{className:"katex-display",children:(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mn,{children:"1."}),(0,a.jsxs)(s.msup,{children:[(0,a.jsx)(s.mn,{children:"1"}),(0,a.jsx)(s.mn,{children:"100"})]}),(0,a.jsx)(s.mo,{children:"="}),(0,a.jsx)(s.mn,{children:"1.38"}),(0,a.jsx)(s.mo,{children:"\u2217"}),(0,a.jsx)(s.mn,{children:"1"}),(0,a.jsxs)(s.msup,{children:[(0,a.jsx)(s.mn,{children:"0"}),(0,a.jsx)(s.mn,{children:"4"})]})]}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"1.1^{100} = 1.38*10^4"})]})})}),(0,a.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.8641em"}}),(0,a.jsx)(s.span,{className:"mord",children:"1."}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord",children:"1"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsx)(s.span,{className:"vlist-t",children:(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.8641em"},children:(0,a.jsxs)(s.span,{style:{top:"-3.113em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:"100"})})})]})})})})})]}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mrel",children:"="}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(s.span,{className:"mord",children:"1.38"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(s.span,{className:"mbin",children:"\u2217"}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.8641em"}}),(0,a.jsx)(s.span,{className:"mord",children:"1"}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord",children:"0"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsx)(s.span,{className:"vlist-t",children:(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.8641em"},children:(0,a.jsxs)(s.span,{style:{top:"-3.113em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:"4"})})]})})})})})]})]})]})]})})}),"\n",(0,a.jsx)(s.p,{children:"It was a brief introduction to dynamic programming, but hopefully you will get the intuition behind why it works."}),"\n",(0,a.jsx)(s.h2,{id:"optimization-of-the-train-operation",children:"Optimization of the train operation"}),"\n",(0,a.jsx)(s.p,{children:"When it comes to optimizing the energy consumption of a train, we can breakdown the whole trip from point A to point B into shorter segments. Instead of optimizing a 100km trip directly, we can start by optimizing the first kilometer. The problem can be represented as a graph with a root node being the origin station, and a terminal node being the next station to reach. Nodes in between will be steps allowing to reach our goal (the terminal node)."}),"\n",(0,a.jsx)(s.p,{children:"A node consists of:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"Current speed: the speed at which the train will operate for the next segment."}),"\n",(0,a.jsx)(s.li,{children:"List of previous speeds: to keep track of the operation history."}),"\n",(0,a.jsx)(s.li,{children:"Trip duration: since departure from the root node."}),"\n",(0,a.jsx)(s.li,{children:"Traveled distance: from the root node."}),"\n",(0,a.jsx)(s.li,{children:"Consumed energy: this one metrics to be optimized compared to a reference."}),"\n"]}),"\n",(0,a.jsx)(s.p,{children:"After each segment, there will be a decision-making step: do we accelerate, decelerate or keep constant speed ?"}),"\n",(0,a.jsx)(s.h2,{id:"initialization-of-the-problem",children:"Initialization of the problem"}),"\n",(0,a.jsx)(s.p,{children:"We start the optimization by generating the root node: all the properties of the node will be equal to zero. Then we generate children nodes based on reachable speeds within the next segment; with regards to laws of physics, and external constraints (maximum speed for instance)."}),"\n",(0,a.jsx)(s.h2,{id:"main-loop",children:"Main loop"}),"\n",(0,a.jsxs)(s.p,{children:["Until we reach the terminal node (or when ",(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsx)(s.mrow,{children:(0,a.jsx)(s.mi,{children:"n"})}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"n"})]})})}),(0,a.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.4306em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"n"})]})})]})," paths are found), we will proceed as follows:"]}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"Select the node with the best heuristic that we define (it can be the best delay to energy saved ratio)"}),"\n",(0,a.jsx)(s.li,{children:"Generate a child for each reachable speed within the next segment, if all the constraints are still respected. Each child will have a different current speed, trip duration and consumed energy, but a common list of previous speeds as they are generated from the same parent."}),"\n"]}),"\n",(0,a.jsx)(s.h2,{id:"solutions",children:"Solutions"}),"\n",(0,a.jsx)(s.p,{children:"We can either decide to end the search:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"as soon as we have found a solution"}),"\n",(0,a.jsxs)(s.li,{children:["as soon as we generated ",(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsx)(s.mrow,{children:(0,a.jsx)(s.mi,{children:"n"})}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"n"})]})})}),(0,a.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.4306em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"n"})]})})]})," paths from the root node to the terminal node"]}),"\n"]}),"\n",(0,a.jsx)(s.p,{children:"The first one will indeed be the fastest option, but the second one will allow to get a set of different paths, having different delays and energy savings. From this set we can identify a pareto front of paths achieving best trade-offs."}),"\n",(0,a.jsx)(s.h2,{id:"results",children:"Results"}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.img,{alt:"Optimized speed curve",src:n(8769).Z+"",width:"3076",height:"1655"}),"\n",(0,a.jsx)(s.em,{children:"Optimized speed curve"})]}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.img,{alt:"One of the metrics tested (top left is better)",src:n(9045).Z+"",width:"1891",height:"1923"}),"\n",(0,a.jsx)(s.em,{children:"One of the metrics tested (top left is better)"})]})]})}function h(e={}){const{wrapper:s}={...(0,t.a)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(m,{...e})}):m(e)}},8769:(e,s,n)=>{n.d(s,{Z:()=>a});const a=n.p+"assets/images/acceleration-6cb03d3e216bc61d9ca1bcdfd4261431.png"},9045:(e,s,n)=>{n.d(s,{Z:()=>a});const a=n.p+"assets/images/metric_1-c6fca6e33eceb9414f6c38f58e088d68.png"},1151:(e,s,n)=>{n.d(s,{Z:()=>l,a:()=>r});var a=n(7294);const t={},i=a.createContext(t);function r(e){const s=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),a.createElement(i.Provider,{value:s},e.children)}}}]);